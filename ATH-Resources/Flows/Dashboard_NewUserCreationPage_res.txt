*** Settings ***
Resource	C:/Ath.Git/AdaptiveTelehealth/ATH-Resources/Flows/CommonPage_res.txt


**** Keywords ****

Complete registration Process
	[Arguments]	${FirstName}	${LastName}	${Email}
	Dashboard.NewUser.Input First Name	${FirstName}
	Dashboard.NewUser.Input Last Name	${LastName}
	Dashboard.NewUser.Input Password	Password123!!!
	Dashboard.NewUser.Input Confirm Password	Password123!!!
	Dashboard.NewUser.Input Confirm Email	${Email}
	Run Keyword and Ignore Error	Dashboard.Registration.Select I agree checkboxes
	# ${vPos}	Get Vertical Position	xpath=//canvas[@id='dd_canvas']
	# ${vPos}	Get horizontal Position	xpath=//canvas[@id='dd_canvas']
	# Run keyword and ignore error	mouse_down_at	xpath=//canvas[@id='dd_canvas'] 	${vPos}	${vPos}
	# Run keyword and ignore error	mouse_down_at	xpath=//canvas[@id='dd_canvas'] 	0px	150px
	# Run keyword and ignore error	mouse_down_at	xpath=//canvas[@id='dd_canvas'] 	150px	0px
	Capture Page Screenshot
	ath click button	xpath=//input[@id='registration_form_submit_btn']
	Capture Page Screenshot

Dashboard.Registration.Select I agree checkboxes
	ath_set_checkbox	xpath=(//*[contains(text(),'Yes, I agree')])[1]/following::input[1]
	Execute Javascript	var element = document.evaluate("(//*[contains(text(),'Yes, I agree')])[2]/following::input[1]" ,document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null ).singleNodeValue;if (element != null) {element.click();}

# Dashboard.Registration.Input Password
# 	[Arguments]	${Password}
# 	ath input text value	Password	${Password}

# Dashboard.Registration.Input Confirm Password
# 	[Arguments]	${Password}
# 	ath input text value	Confirm Password	${Password}
Dashboard.Confirm Create Client File Button
	[Arguments]	${Confirm}=No
	ath click button	xpath=//*[contains(normalize-space(),'Have you already invited')]/ancestor::div[@class="modal-dialog"]/descendant::span[contains(normalize-space(),'${Confirm}')]
	Sleep 	1.0
	ath wait until loaded 	30

Dashboard.Click New Client Button
	ath click button	xpath=//*[@class="page-title"][text()="Dashboard"]/ancestor::div/descendant::li/button


Dashboard.Click New Therapist Button
	ath click button	xpath=//span[contains(text(),'New Therapist')]
	Sleep 	2.0
	ath_wait_until_element_is_present	xpath=//h4[contains(text(),'New Therapist')] 	160


Dashboard.Click New Supervisor Button
	ath click button	xpath=//span[contains(text(),'New Supervisor')]
	Sleep 	5.0
	ath_wait_until_element_is_present	xpath=//h4[contains(text(),'New Supervisor')]	60


Dashboard.Click New Admin Button
	ath click button	xpath=//span[contains(text(),'New Admin (Or Biller)')]
	Sleep 	5.0
	ath_wait_until_element_is_present	xpath=//h4[contains(text(),'New Supervisor')]	60


Dashboard.NewClient.Input Group Company Email
	[Arguments]	${Email}
	ath input text value	Enter Groups Company's Email Address	${Email}

Dashboard.NewClient.Input Client Email
	[Arguments]	${Email}
	ath input text value	Enter Client's Email Address	${Email}


Dashboard.NewClient.Click Invite Groups Company Button
	ath click button 	Invite Groups Company
	Sleep 	3.0

Dashboard.NewClient.Click Invite Client Button
	ath click button 	Invite Client
	Sleep 	3.0

Dashboard.Click back to Dashboard link
	ath click link	xpath=//a[contains(text(),'Back to Dashboard')]
	Sleep 	3.0


Dashboard.NewClient.Verify Client is Invited
	[Arguments]	${Email}
	ath verify element is visible	xpath=//*[text()="Successfully Sent"]
	Run Keyword if 	"${TestEnv}" == "Secure"	ath verify element is visible	xpath=//*[text()="Groups Company's email:"]	ELSE	ath verify element is visible	xpath=//*[text()="Client's email:"]
	ath verify element is visible	xpath=//*[normalize-space()="${Email}"]
	Capture Page Screenshot

Dashboard.NewClient.Click Login to Platform
	ath click link	//a[text()="login to the platform here"]
	Sleep 	2.0
	ath wait until element is present	//h3[@class="box-title"][normalize-space()="Login"]


Dashboard.NewUser.Enter New Password
	[Arguments]	${NewPwd}
	ath input text value	Enter new password	${NewPwd}


Dashboard.NewUser.Click Update Password Button
	ath click button 	Update Password
	Sleep 	5.0
	ath wait until loaded 	30

Dashboard.NewUser.Input First Name
	[Arguments]	${FirstName}
	ath input text value	First Name	${FirstName}

Dashboard.NewUser.Input Last Name
	[Arguments]	${LastName}
	ath input text value	Last Name	${LastName}

Dashboard.NewUser.Input Password
	[Arguments]	${Password}
	ath input text value	Password	${Password}

Dashboard.NewUser.Input Confirm Password
	[Arguments]	${confpwd}
	ath input text value	Confirm Password	${confpwd}

Dashboard.NewUser.Input Confirm Email
	[Arguments]	${Email}
	ath input text value	Confirm Email	${Email}

Dashboard.NewUser.Input City
	[Arguments]	${City}
	ath input text value	City	Hollywood

Dashboard.NewUser.Input Address
	[Arguments]	${Address}
	ath input text value	Address	${Address}

Dashboard.NewUser.Input Zip
	[Arguments]	${zipCode}
	ath input text value	Zip	${zipCode}

Dashboard.NewUser.Input Email
	[Arguments]	${Email}
	ath input text value	xpath=(//label[text()="Email:"]/../following-sibling::div/input)[1] 	${Email}

Dashboard.NewUser.Input NPI
	[Arguments]	${NPI}
	ath input text value	NPI	${NPI}

Dashboard.NewUser.Input Registration Code
	[Arguments]	${RegCode}
	ath input text value	xpath=(//label[text()="Registration Code:"]/../following-sibling::div/input)[1]	${RegCode}

Dashboard.NewUser.Select Supervisor
	[Arguments]	${Supervisor}
	ath select drop down field value	Assign Supervisor	${Supervisor}

Dashboard.NewUser.Select Gender
	[Arguments]	${Gender}
	ath select drop down field value	Gender	${Gender}


Dashboard.NewUser.Input Phone Number1
	[Arguments]	${PhoneNumber1}
	ath input text value	Phone Number1:	${PhoneNumber1}

Dashboard.NewUser.Select I agree checkboxes
	ath_set_checkbox	xpath=(//*[contains(text(),'Yes, I agree')])[1]/../descendant::ins
	ath_set_checkbox	xpath=(//*[contains(text(),'Yes, I agree')])[2]/../descendant::ins

Dashboard.NewUser.Input Full Name
	[Arguments]	${FullName}
	ath input text value	Full Name	${FullName}

Dashboard.NewUser.AgreementsPage.Input Full Name as Digital Signature
	[Arguments]	${FullName}
	ath input text value	Enter your full name as digital signature	${FullName}

Dashboard.NewUser.AgreementsPage.Input TimeZone
	[Arguments]	${IsTimezone}
	Ath select drop down field value	xpath=//select[@id='user_timezone']	${IsTimezone}

Dashboard.NewUser.AgreementsPage.Click Submit Button
	ath click button	Submit
	Sleep 	5.0
	Ath Wait Until Loaded	30

Dashboard.NewUser.Click OK button
	ath click button	Ok
	Ath wait until loaded 	30

Dashboard.NewUser.Click Set User Function button
	ath click button	Set User Functions Access

Dashboard.NewUser.Select Check/Uncheck All checkbox
	ath set checkbox 	Check/Uncheck All	true

Dashboard.NewUser.SetUserFunction.Click Save Button
	ath click button 	Save

Dashboard.NewUser.Click Add New Therapist Button
	ath click button 	xpath=(//input[@value="Add new therapist"])
	Sleep 	5.0
	ath wait until loaded 	30

Dashboard.NewUser.Click Add New Supervisor Button
	ath click button 	xpath=(//input[@value="Add new supervisor"])
	Sleep 	5.0
	ath wait until loaded 	30

Dashboard.NewUser.Click Add New User Button
	ath click button 	xpath=(//input[@value="Add new user"])
	Sleep 	5.0
	ath wait until loaded 	30

Dashboard.NewUser.Is Read Only Supervisor
	[Arguments]	${ReadOnly}
	ath select drop down field value	Read Only Supervisor?	${ReadOnly}

Dashboard.NewUser.Is Super Care Coordinator
	[Arguments]	${SuperCare}
	ath select drop down field value	Super Care Coordinator?	${SuperCare}

Dashboard.NewUser.Is Biller Role
	[Arguments]	${BillerRole}
	ath select drop down field value	Biller Role?	${BillerRole}

Dashboard.NewUser.AssignSupervisor to Admin
	[Arguments]	${Supervisor}
	ath select drop down field value	//*[@id="addNewAdmin"]/descendant::select[@name="supervisor"]	${Supervisor}

Dashboard.NewUser.Verify Supervisor Is saved successfully
	ath verify element is visible	xpath=//*[contains(text(),'Supervisor added and email sent.')]
	# ' Warning: Failed adding Zoom user. Zoom error: Email domain is blocked"]
	# Supervisor added and email sent. Warning: Failed adding Zoom user. Zoom error: Cannot add the following user at this time. Contact 

Dashboard.NewUser.Verify User Is saved successfully
	ath verify element is visible	xpath=//*[contains(text(),'User added and email sent.')]


Dashboard.NewUser.Verify Therapist saved successfully
	ath verify element is visible	xpath=//*[contains(@class,'alert-success')][text()="Therapist added and email sent."]
	ath verify element is visible	xpath=//*[text()="Therapist successfully assigned to Supervisor."]


Dashboard.InvitationsWidget.Select Records per Page Value
	[Arguments]	${RecordNo}
	ath select drop down field value	//div[@id='Invitations_wrapper']/descendant::label[text()="Records per page "]/select	${RecordNo}
	Sleep 	3.0
	ath wait until loaded 	60

Dashboard.ProvidersWidget.Select Records per Page Value
	[Arguments]	${RecordNo}
	ath select drop down field value	//div[@id='providers_list']/descendant::label[text()="Records per page "]/select	${RecordNo}
	Sleep 	3.0
	ath wait until loaded 	60

Dashboard.CareCoordinatorsWidget.Select Records per Page Value
	[Arguments]	${RecordNo}
	ath select drop down field value	//div[@id='carecoordinators_list']/descendant::label[text()="Records per page "]/select	${RecordNo}
	Sleep 	3.0
	ath wait until loaded 	60

Dashboard.AdminsWidget.Select Records per Page Value
	[Arguments]	${RecordNo}
	ath select drop down field value	//div[@id='admins_list']/descendant::label[text()="Records per page "]/select	${RecordNo}
	Sleep 	3.0
	ath wait until loaded 	60


Dashboard.ClientsWidget.Verify Newly Created Client Is Displayed
	[Arguments]	${FirstName}
	ath verify element is visible	xpath=//div[@id='Invitations_wrapper']/descendant::tbody/tr/td[contains(text(),'${FirstName}')]



Dashboard.ProvidersWidget.Select Newly Created Provider
	[Arguments]	${FirstName}
	ath verify element is visible	xpath=//div[@id='providers_list']/descendant::tbody/tr/td/a[contains(text(),'${FirstName} Automation')]
	Capture Page Screenshot
	ath click link	xpath=//div[@id='providers_list']/descendant::tbody/tr/td/a[contains(text(),'${FirstName} Automation')]

Dashboard.ProvidersWidget.Select Newly Created Care Coordinators
	[Arguments]	${FirstName}
	ath verify element is visible	xpath=//div[@id='carecoordinators_list']/descendant::tbody/tr/td/a[contains(text(),'${FirstName} Automation')]
	ath click link	xpath=//div[@id='carecoordinators_list']/descendant::tbody/tr/td/a[contains(text(),'${FirstName} Automation')]

Dashboard.AdminsWidget.Select Newly Created Admin
	[Arguments]	${FirstName}
	ath verify element is visible	xpath=//div[@id='admins_list']/descendant::tbody/tr/td/a[contains(text(),'${FirstName} Automation')]
	ath click link	xpath=//div[@id='admins_list']/descendant::tbody/tr/td/a[contains(text(),'${FirstName} Automation')]

Dashboard.NewUser.Verify Is Assigned to Supervisor
	[Arguments]	${Supervisor}
	ath verify element is visible	xpath=//p[contains(normalize-space(),'${Supervisor}')]

Dashboard.NewUser.Verify Supervisor Profile is Created
	ath verify element is visible	xpath=//h1[contains(text(),'Supervisor Profile')]
	ath check button existence	Update Supervisor Data


Dashboard.NewUser.Verify Admin Data Displayed
	[Arguments]	${FirstName}
	ath verify element is visible	xpath=//h1[contains(text(),'${FirstName}')]
	ath check button existence	Create Chat Credentials


Dashboard.NewUser.Verify Supervisor Assigned to Admin
	[Arguments]	${Supervisor}
	ath verify element is visible	xpath=//p[contains(normalize-space(),'${Supervisor}')]
	ath check links displayed	//a[text()="Deassign"]
	ath check button existence	Update Admin Data